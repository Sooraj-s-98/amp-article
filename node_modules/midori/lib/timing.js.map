{"version":3,"sources":["../src/timing.js"],"names":["mark","process","hrtime","setMark","m","finish","then","callback","end","headers","response","res","Promise","resolve","timing"],"mappings":";;;;;;;AACA;;AACA;;AACA;;AACA;;;;AAIA,IAAIA,IAAU,GAAGC,OAAO,CAACC,MAAzB;;AAEO,MAAMC,OAAO,GAAIC,CAAD,IAAcJ,IAAI,GAAGI,CAArC;;;;AAEP,MAAMC,MAAM,GAAG,CAACC,IAAD,EAAOC,QAAP,KAAoB;AACjC,QAAMC,GAAG,GAAGR,IAAI,CAACM,IAAD,CAAhB;AACAC,EAAAA,QAAQ,CAACC,GAAG,CAAC,CAAD,CAAH,GAAS,IAAT,GAAgBA,GAAG,CAAC,CAAD,CAAH,GAAS,OAA1B,CAAR;AACD,CAHD;;AAKO,MAAMC,OAAO,GAAG,6BAAeC,iBAAf,EAA0BC,GAAD,IAAS;AACvD,QAAML,IAAI,GAAGN,IAAI,EAAjB;AACA,SAAO,IAAIY,OAAJ,CAAaC,OAAD,IAAa;AAC9B,6BAAWF,GAAX,EAAgB,MAAMN,MAAM,CAACC,IAAD,EAAOO,OAAP,CAA5B;AACA,4BAAUF,GAAV,EAAe,MAAMN,MAAM,CAACC,IAAD,EAAOO,OAAP,CAA3B;AACD,GAHM,CAAP;AAID,CANsB,CAAhB;;AAQA,MAAML,GAAG,GAAG,6BAAeE,iBAAf,EAA0BC,GAAD,IAAS;AACnD,QAAML,IAAI,GAAGN,IAAI,EAAjB;AACA,SAAO,IAAIY,OAAJ,CAAaC,OAAD,IAAa;AAC9B,6BAAWF,GAAX,EAAgB,MAAMN,MAAM,CAACC,IAAD,EAAOO,OAAP,CAA5B;AACD,GAFM,CAAP;AAGD,CALkB,CAAZ;;AAOP,MAAMC,MAAM,GAAG;AAACL,EAAAA,OAAD;AAAUD,EAAAA;AAAV,CAAf;eAEeM,M","sourcesContent":["// @flow\nimport onHeaders from 'on-headers';\nimport onFinished from 'on-finished';\nimport response from './response';\nimport createSelector from './createSelector';\n\ntype Mark = (time?: [number, number]) => [number, number];\n\nlet mark: Mark = process.hrtime;\n\nexport const setMark = (m: Mark) => (mark = m);\n\nconst finish = (then, callback) => {\n  const end = mark(then);\n  callback(end[0] / 1000 + end[1] / 1000000);\n};\n\nexport const headers = createSelector(response, (res) => {\n  const then = mark();\n  return new Promise((resolve) => {\n    onFinished(res, () => finish(then, resolve));\n    onHeaders(res, () => finish(then, resolve));\n  });\n});\n\nexport const end = createSelector(response, (res) => {\n  const then = mark();\n  return new Promise((resolve) => {\n    onFinished(res, () => finish(then, resolve));\n  });\n});\n\nconst timing = {headers, end};\n\nexport default timing;\n"],"file":"timing.js"}